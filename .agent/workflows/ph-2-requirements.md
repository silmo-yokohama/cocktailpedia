---
description: 企画書をベースに要件定義を行います。
---

# Ph2. 要件定義フェーズ指示書

## フェーズ概要

| 項目 | 内容 |
|------|------|
| 目的 | 何を作るか、何を満たすべきかを明確にする |
| 担当 | AG |
| 重要度 | ★★★（最重要フェーズ） |
| 成果物 | 要件定義書（4ファイル） |
| 前フェーズ | Ph1. 企画 |
| 次フェーズ | Ph3. 技術選定 |

**このフェーズが最重要な理由**:
CCは「要件を満たすこと」に集中する。要件の質がプロダクトの質を決める。

---

## ワークフロー

```
Step1: 機能要件を洗い出す
  ↓ 施主確認「Step1はこれでOK？」
Step2: 画面要件を決める
  ↓ 施主確認「Step2はこれでOK？」
Step3: 非機能要件を決める
  ↓ 施主確認「Step3はこれでOK？」
Step4: 整合性チェック
  ↓ AGセルフレビュー → CCレビュー → 施主最終承認
完了 → Ph3へ
```

**ポイント**:
- 各ステップで「ここまでOK？」と確認を挟む
- 不整合が見つかったら、該当ステップに戻って修正
- 一気に完成形を目指さない

---

## Step1: 機能要件

### 目的

このサービスで「何ができるか」を洗い出し、優先順位をつける。

### 1-1. 主要機能の洗い出し

**質問例**:
- このサービスでユーザーは何ができる？
- 企画書のコア機能を実現するために、具体的にどんな操作が必要？
- 管理者（自分）側でやる操作はある？

**深掘りのヒント**:
- 「〇〇できる」を動詞で列挙させる（登録する、検索する、ダウンロードする等）
- ユーザー種別ごとに分けて考える（一般ユーザー / 管理者 / 未ログインユーザー）

### 1-2. 機能の詳細化

**各機能について確認すること**:

| 項目 | 確認内容 |
|------|---------|
| 入力 | 何を入力する？必須/任意は？ |
| 処理 | どんな処理をする？ |
| 出力 | 結果として何が返る/表示される？ |
| 例外 | エラー時はどうする？ |

### 1-3. 優先順位

**質問例**:
- この機能がないと絶対ダメ、というものはどれ？
- あったら嬉しいけど、最悪なくてもいいものは？
- 将来的にやりたいけど、初期リリースでは不要なものは？

**優先度の定義**:
- **Must**: 必須（これがないとサービスとして成立しない）
- **Should**: 推奨（あった方がいいが、なくても最低限動く）
- **Could**: 任意（余裕があれば）
- **Won't**: 今回はやらない（将来検討）

### 成果物

- `ph-2-requirements-functional.tmp.md` を埋める
- `ph-2-requirements-index.tmp.md` を作成する（制約条件・用語集の初期作成）

※ このStepで出てきた制約条件や用語があれば `index.md` に記載しておく。

### Step1 完了条件

- [ ] 全機能が洗い出されている
- [ ] 各機能の入力/処理/出力が明確
- [ ] 優先順位がついている
- [ ] **機能要件書（functional.md）が作成されている**
- [ ] **要件定義書index（index.md）が作成されている**（このStepで出た制約・用語を記載）
- [ ] 施主が「Step1はこれでOK」と言っている

**次のセッションへの引き継ぎ**:
Step1完了時点で `functional.md` と `index.md` を保存し、次セッション開始時に参照できるようにしておく。

---

## Step2: 画面要件

### 目的

どんな画面があり、どう遷移し、どんなデザインにするかを決める。

### 2-1. 画面一覧

**質問例**:
- Step1の機能を実現するために、どんな画面が必要？
- ユーザーが最初に見る画面は？
- ログインは必要？ログイン前後で見える画面は変わる？

**洗い出しのヒント**:
- 機能一覧を見ながら「この機能はどの画面で使う？」を考える
- 一般的なWebアプリの画面構成を参考に提示する
  - トップページ / 一覧画面 / 詳細画面 / 作成・編集画面 / 設定画面 / ログイン画面 / etc.

### 2-2. 画面遷移

**確認すること**:
- 画面間の遷移フロー（どこからどこに行ける？）
- 主要な導線（ユーザーが一番よく通るルート）
- 戻る/キャンセル時の挙動

### 2-3. 各画面の機能

**各画面について確認すること**:
- この画面では何ができる？（Step1の機能との紐付け）
- 何が表示される？
- ユーザーの主要なアクションは？

### 2-4. 共通コンポーネント

**質問例**:
- 全画面に共通で表示するものはある？（ヘッダー、フッター、サイドバー、ナビゲーション）
- 通知やアラートの表示方法は？
- モーダル（ポップアップ）は使う？

### 2-5. デザイン方針

**施主から引き出すもの**:
- 参考にしたいサイト・アプリはある？
- どんな雰囲気にしたい？（シンプル、かっこいい、柔らかい、ポップ等）
- これは嫌だ、というデザインはある？
- 特に指定がなければCCにおまかせでもOK？

**AGがやること**:
施主の言葉を「デザイン用語＋形容詞」に翻訳し、CCが理解できる形で要件定義書に記載する。

**翻訳の例**:

| 施主の言葉 | AGが翻訳した要件 |
|-----------|-----------------|
| 「シンプルだけど安っぽくない」 | ミニマルで洗練された印象。ホワイトスペース（余白）を大胆に使い、要素を絞る |
| 「目立たせたいところは目立たせて」 | ビビッドなアクセントカラーで周囲とのコントラストを強調し、視認性を高める |
| 「柔らかい、優しい感じ」 | ニュアンスカラーを用い、全体をペール（淡い）トーンでまとめ、柔らかい印象に |
| 「力強い、インパクトある」 | ダイナミックで力強い印象。タイポグラフィのジャンプ率（大小差）を上げる |
| 「高級感、上品な感じ」 | エレガントで繊細な空気感。細身のフォント、カーニング（文字間）広め |
| 「Notionみたいな」 | クリーンでミニマル。ホワイトスペース多め、モノトーン基調 |
| 「特にこだわりない」 | CCの裁量に委ねる。ただし奇抜なデザインは避け、標準的なUIパターンに従う |

### 2-6. その他の画面仕様

**確認すること**:

| 項目 | 確認内容 | 選択肢の例 |
|------|---------|-----------|
| テーマ | ライトモード/ダークモード | ライトのみ / ダークのみ / 両対応 / システム設定に従う |
| レスポンシブ | モバイル対応するか | PC専用 / モバイル専用 / 両対応（モバイルファースト） |
| アニメーション | ページ遷移やインタラクションの動き | なし / 控えめ / しっかり / CCにおまかせ |
| ローディング | データ取得中の表示 | スピナー / スケルトン / CCにおまかせ |
| エラー状態 | エラー時の表示 | トースト通知 / インライン表示 / 専用画面 / CCにおまかせ |
| 空状態 | データがないときの表示 | メッセージのみ / イラスト付き / CCにおまかせ |

### 成果物

- `ph-2-requirements-screens.tmp.md` を埋める
- `ph-2-requirements-index.tmp.md` に追記（このStepで出てきた制約・用語があれば）

### Step2 完了条件

- [ ] 全画面が洗い出されている
- [ ] 画面遷移が明確
- [ ] 各画面と機能の紐付けができている
- [ ] デザイン方針が決まっている（おまかせ含む）
- [ ] **画面要件書（screens.md）が作成されている**
- [ ] **index.md に制約・用語を追記している**（該当があれば）
- [ ] 施主が「Step2はこれでOK」と言っている

**次のセッションへの引き継ぎ**:
Step2完了時点で `screens.md` と更新した `index.md` を保存し、次セッション開始時に参照できるようにしておく。

---

## Step3: 非機能要件

### 目的

機能以外の「やる/やらない」を明確にする。
**「後からやる」は「やらない」と同義**。ここで決める。

### ヒアリング項目

以下の項目について、**やる/やらない**を明確にする。
「やる」場合は詳細も決める。

#### 3-1. 認証・認可

| 項目 | 確認内容 |
|------|---------|
| ログイン機能 | 必要か？必要なら認証方式は？（メール/パスワード、OAuth、マジックリンク等） |
| ユーザー登録 | 誰でも登録可能？招待制？管理者のみ？ |
| 権限管理 | ユーザー種別ごとに権限を分ける必要があるか？ |

#### 3-2. SEO

| 項目 | 確認内容 |
|------|---------|
| 検索エンジン対策 | 検索からの流入を想定するか？ |
| OGP対応 | SNSシェア時の表示を設定するか？ |
| サイトマップ | 生成するか？ |

#### 3-3. アクセス解析

| 項目 | 確認内容 |
|------|---------|
| アクセス解析 | 導入するか？（GA4、Umami等） |
| イベントトラッキング | 特定のアクション（クリック、コンバージョン等）を計測するか？ |

#### 3-4. アクセシビリティ

| 項目 | 確認内容 |
|------|---------|
| 対応レベル | 意識する / 最低限のみ / 対応しない |
| 具体的な対応 | キーボード操作、スクリーンリーダー、色のコントラスト等 |

#### 3-5. パフォーマンス

| 項目 | 確認内容 |
|------|---------|
| 目標値 | 特に設定するか？（例：LCP 2.5秒以内） |
| 画像最適化 | 対応するか？ |

#### 3-6. セキュリティ

| 項目 | 確認内容 |
|------|---------|
| 基本対策 | XSS、CSRF等の基本対策（通常はフレームワーク任せ） |
| 追加対策 | 特別に必要なものがあるか？ |

#### 3-7. 多言語対応（i18n）

| 項目 | 確認内容 |
|------|---------|
| 対応言語 | 日本語のみ / 多言語対応 |
| 対応方式 | 初期から対応 / 後から対応できる設計にしておく |

#### 3-8. ログ・監視

| 項目 | 確認内容 |
|------|---------|
| エラーログ | 収集するか？（Sentry等） |
| 監視 | 死活監視するか？ |

#### 3-9. バックアップ

| 項目 | 確認内容 |
|------|---------|
| データバックアップ | 必要か？頻度は？ |

### 成果物

- `ph-2-requirements-non-functional.tmp.md` を埋める
- `ph-2-requirements-index.tmp.md` に追記（このStepで出てきた制約・用語があれば）

### Step3 完了条件

- [ ] 全項目についてやる/やらないが決まっている
- [ ] 「やる」ものは詳細が決まっている
- [ ] **非機能要件書（non_functional.md）が作成されている**
- [ ] **index.md に制約・用語を追記している**（該当があれば）
- [ ] 施主が「Step3はこれでOK」と言っている

**次のセッションへの引き継ぎ**:
Step3完了時点で `non_functional.md` と更新した `index.md` を保存し、次セッション開始時に参照できるようにしておく。

---

## Step4: 整合性チェック

### 目的

要件定義書全体の整合性を確認し、抜け漏れや矛盾を潰す。

### 4-1. AGセルフレビュー

以下の観点でAG自身がチェックする。

**チェック観点**:
- [ ] 機能要件と画面要件の紐付けに漏れがないか
- [ ] 全ての機能がいずれかの画面で実現されているか
- [ ] 画面遷移に矛盾がないか（行き止まり、到達不能な画面がないか）
- [ ] 非機能要件の「やる」が機能や画面に影響を与えていないか
- [ ] 用語が統一されているか
- [ ] 曖昧な表現が残っていないか

### 4-2. CCレビュー依頼

AGのセルフレビュー完了後、CCにレビューを依頼する。

**レビュー依頼テンプレート**:
```
以下の要件定義書をレビューしてください。

対象ファイル:
- docs/02_requirements/index.md
- docs/02_requirements/functional.md
- docs/02_requirements/screens.md
- docs/02_requirements/non_functional.md

レビュー観点:
1. 実装観点での曖昧さ（実装時に迷いそうな記述）
2. 技術的な矛盾や実現困難な要件
3. 抜け漏れ（一般的なWebアプリで必要だが記載がない項目）
4. 非機能要件の妥当性（個人開発の規模に対して過剰/不足）

問題があれば具体的に指摘してください。
問題がなければ「問題なし」と回答してください。
```

### 4-3. 指摘対応

CCからの指摘があれば、AGが修正または施主に相談。

### 4-4. 施主最終承認

全ての指摘が解消されたら、施主に最終確認。

### 成果物

- `ph-2-requirements-index.tmp.md` の最終確認・整理（制約条件・用語集の漏れがないか確認）

### Step4 完了条件

- [ ] AGセルフレビュー完了
- [ ] CCレビュー完了、指摘対応済み
- [ ] **index.md の最終確認・整理が完了している**
- [ ] 施主が「要件定義完了」と承認

---

## 完了条件（フェーズ全体）

以下のすべてを満たしたら、要件定義フェーズ完了として Ph3 へ進む。

- [ ] 機能要件書が作成されている
- [ ] 画面要件書が作成されている
- [ ] 非機能要件書が作成されている
- [ ] 要件定義書（index）が作成されている
- [ ] CCレビュー完了
- [ ] 施主が「要件定義完了」と承認

---

## AGの姿勢

- **要件定義であって設計ではない**ことを忘れない
  - 「どう実現するか」ではなく「何を実現するか」を決める
  - 技術的な実現方法はPh3以降で検討
- **関連機能の提案**: 「〇〇の機能があると便利かも」
- **代替案の提示**: 「〇〇という方法もあるけど、どっちがいい？」
- **リスクの指摘**: 「〇〇は実装コストが高い割にリターンが小さいかも」
- **個人開発の前提**を忘れない
  - 機能を詰め込みすぎない
  - 「やらない」を決める勇気を持つ