# 技術選定書

## 概要

本ドキュメントは、Cocktailpedia で使用する技術スタックを定義する。

---

## 選定結果サマリー

| カテゴリ | 選定技術 |
|---------|---------|
| フレームワーク | Next.js 15 (App Router) |
| ホスティング | Vercel |
| データベース | Supabase (PostgreSQL) |
| 認証 | Next.js Middleware (Basic認証) |
| ストレージ | Supabase Storage |
| スタイリング | Tailwind CSS v4 |
| UIライブラリ | shadcn/ui |
| アクセス解析 | Google Analytics 4 (GA4) |

---

## 選定詳細

### フレームワーク: Next.js 15 (App Router)

| 項目 | 内容 |
|------|------|
| 公式サイト | https://nextjs.org/ |
| バージョン | 15.x (App Router) |
| 選定理由 | ・施主の学習目的（最新Next.jsを学びたい）<br>・SSR/SSG両対応でSEO要件を満たす<br>・国内情報量が豊富<br>・トレンドとして主流 |
| 備考 | App Routerがデフォルト。Pages Routerは使用しない |

---

### ホスティング: Vercel

| 項目 | 内容 |
|------|------|
| 公式サイト | https://vercel.com/ |
| プラン | Hobby（無料） |
| 選定理由 | ・Next.jsとの最高の相性（Vercel社がNext.js開発元）<br>・GitHub連携で自動デプロイ<br>・無料枠でも帯域100GB/月<br>・国内情報量が豊富 |
| 制限 | Hobby: 帯域100GB/月、サーバーレス関数10秒タイムアウト |
| コスト | 無料（帯域超過時はPro $20/月） |

---

### データベース: Supabase (PostgreSQL)

| 項目 | 内容 |
|------|------|
| 公式サイト | https://supabase.com/ |
| プラン | Free（無料） |
| 選定理由 | ・PostgreSQLベースで標準的なSQLが使える<br>・認証・ストレージと一体で管理が楽<br>・無料枠500MBはカクテルデータに十分<br>・施主の学習目的（Supabaseを使いたい）<br>・2024-2025のトレンドで人気 |
| 制限 | Free: 500MB、7日間非アクティブで一時停止 |
| 一時停止対策 | 許容する（再起動は簡単。必要に応じてVercel Cronで定期アクセスを検討） |
| コスト | 無料（スケール時はPro $25/月） |

---

### 認証: Next.js Middleware (Basic認証)

| 項目 | 内容 |
|------|------|
| 方式 | Next.js MiddlewareでBasic認証を実装 |
| 対象 | `/admin` 配下のルート |
| 選定理由 | ・シンプルで追加サービス不要<br>・無料<br>・環境変数でID/PWを管理 |
| 備考 | 認証情報は環境変数 `ADMIN_USER`, `ADMIN_PASSWORD` で管理 |

---

### ストレージ: Supabase Storage

| 項目 | 内容 |
|------|------|
| 公式サイト | https://supabase.com/storage |
| プラン | Free（無料） |
| 選定理由 | ・Supabaseと一体で管理できる<br>・無料枠1GBはカクテル画像に十分<br>・アクセス制御がDBと連携可能 |
| 制限 | Free: 1GB |
| 用途 | カクテル画像のアップロード・保存 |

---

### スタイリング: Tailwind CSS v4

| 項目 | 内容 |
|------|------|
| 公式サイト | https://tailwindcss.com/ |
| バージョン | 4.x |
| 選定理由 | ・2024-2025のデファクトスタンダード<br>・開発効率が高い<br>・Next.js / shadcn/uiとの相性◎<br>・施主に経験あり |
| 備考 | v4はCSS-firstの設計変更あり。設定ファイルがシンプルに |
| shadcn/ui互換性 | ✅ 対応済み（公式にTailwind v4対応をアナウンス済み） |

---

### UIライブラリ: shadcn/ui

| 項目 | 内容 |
|------|------|
| 公式サイト | https://ui.shadcn.com/ |
| 選定理由 | ・Tailwindと相性抜群<br>・「コピーして使う」方式でカスタマイズ自由<br>・2024年トレンドで国内情報も豊富<br>・クラシック・レトロなデザインにも対応しやすい |
| 備考 | Radix UIベース。コンポーネントはプロジェクトにコピーされる |

---

### アクセス解析: Google Analytics 4 (GA4)

| 項目 | 内容 |
|------|------|
| 公式サイト | https://analytics.google.com/ |
| 選定理由 | ・非機能要件で決定済み<br>・無料<br>・標準的で情報量豊富 |
| 導入方法 | next/script または @next/third-parties で導入 |
---

### アニメーション

| 項目 | 内容 |
|------|------|
| 基本方針 | Tailwind CSS のビルトイン機能 + shadcn/ui のアニメーションを使用 |
| 追加ライブラリ | 必要に応じて **Framer Motion** を導入（CCの判断に委ねる） |
| 選定理由 | ・Tailwindのtransition/animateで基本的なアニメーションは対応可能<br>・より高度なアニメーションが必要な場合はFramer Motionがトレンド |
| 備考 | 画面要件で「しっかり目」の指定あり。実装時にCCが判断 |

---

## 技術スタック構成図

```
┌─────────────────────────────────────────────────────────────┐
│                        Frontend                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  Next.js 15 (App Router)                                │ │
│  │  ├── Tailwind CSS v4 (スタイリング)                      │ │
│  │  ├── shadcn/ui (UIコンポーネント)                        │ │
│  │  └── Middleware (Basic認証)                             │ │
│  └─────────────────────────────────────────────────────────┘ │
│                            │                                 │
│                            ▼                                 │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  Vercel (ホスティング)                                   │ │
│  │  ├── Edge Functions                                     │ │
│  │  └── 自動デプロイ (GitHub連携)                           │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                        Backend                               │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  Supabase                                               │ │
│  │  ├── PostgreSQL (データベース)                           │ │
│  │  └── Storage (画像ストレージ)                            │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                        External                              │
│  ├── Google Analytics 4 (アクセス解析)                       │
│  └── GitHub (ソースコード管理)                               │
└─────────────────────────────────────────────────────────────┘
```

---

## コスト見積もり

### 無料枠での運用

| サービス | 無料枠 | 想定使用量 | 判定 |
|---------|--------|-----------|------|
| Vercel | 帯域100GB/月 | 個人サイトなら数GB | ◎ 十分 |
| Supabase DB | 500MB | カクテル300種+材料 ≒ 10MB程度 | ◎ 十分 |
| Supabase Storage | 1GB | 画像300枚×2MB ≒ 600MB | ◎ 十分 |
| GA4 | 無料 | - | ◎ |

**結論**: 無料枠内で運用可能

### スケール時の想定コスト

| 条件 | 追加コスト |
|------|-----------|
| アクセス増でVercel帯域超過 | Pro $20/月 |
| Supabase Pro | $25/月 |
| **最大想定** | **約$45/月（約7,000円）** |

---

## 施主の意向反映

| 項目 | 意向 | 反映 |
|------|------|------|
| 学習目的 | Next.js最新を学びたい | Next.js 15 (App Router) を採用 |
| 学習目的 | Supabaseを使ってみたい | Supabase (DB/Storage) を採用 |
| トレンド重視 | トレンドを意識した選定 | 2024-2025で人気の技術を中心に選定 |
| 予算 | 月1000円程度、少しなら払える | 無料枠で開始、スケール時に課金 |
| 構成 | 大規模すぎない | Supabase統一でシンプル化 |

---

## 備考

- 作成日: 2026/01/19
- 作成者: AG（施主ヒアリングに基づく）
- ステータス: 施主承認済み

### バージョン管理方針

- 実装開始時の最新安定版を使用し、`package.json` で固定する
- メジャーバージョンアップは慎重に検討

### 更新履歴

| 日付 | 内容 | 担当 |
|------|------|------|
| 2026/01/19 | 初版作成 | AG |
| 2026/01/19 | CCレビュー指摘対応（互換性確認・一時停止対策・バージョン方針追記） | AG |
| 2026/01/20 | アニメーション方針追記、施主承認 | AG |
