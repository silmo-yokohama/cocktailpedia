# テスト戦略（test_strategy.md）

## 概要

本ドキュメントは、プロジェクトのテスト方針を定義する。
「何をテストするか」「何をテストしないか」を明確にし、過不足のないテストを目指す。

---

## テスト方針

### 基本スタンス

（以下から選択、または独自に定義）

- [ ] **積極的**: 主要な機能には基本的にテストを書く
- [ ] **選択的**: 複雑なロジック・重要な機能のみテストを書く
- [ ] **最小限**: 基本的にテストは書かず、目視確認で進める
- [ ] **なし**: テストは書かない

### 選択した理由

（なぜこの方針にしたかを記載）

例：
- 個人開発で時間が限られているため、選択的にテストを書く
- UI中心のアプリでロジックが少ないため、最小限のテストに留める

---

## テストを書く対象

### 書く

| 対象 | 理由 |
|------|------|
| 計算ロジック | 結果が明確で、バグが見つけやすい |
| バリデーション | 入力パターンが多く、境界値でバグが出やすい |
| データ変換・フォーマット | 期待する出力が明確 |
| 複雑な条件分岐 | 手動で全パターン確認するのが大変 |
| 後から変更が入りそうな箇所 | リグレッション防止 |

### 書かない

| 対象 | 理由 |
|------|------|
| UIコンポーネントの見た目 | 目視確認の方が早い・確実 |
| 単純なCRUD操作 | フレームワーク・ライブラリを信頼 |
| 外部APIの呼び出し部分 | モックが複雑になりがち、E2Eで確認 |
| 一度作ったら変えない部分 | テストの維持コストに見合わない |

### 判断に迷ったら

- CCに相談して判断する
- 「このコードが壊れたらどれくらい困る？」で考える
- 迷うくらいなら書かない（後から必要になったら追加）

---

## テストの種類

### 採用するテスト

| 種類 | 採用 | ツール | 備考 |
|------|------|--------|------|
| 単体テスト | ○ / × | Vitest / Jest | 関数・ロジック単位 |
| 結合テスト | ○ / × | | コンポーネント間の連携 |
| E2Eテスト | ○ / × | Playwright / Cypress | ユーザー操作の再現 |
| スナップショットテスト | ○ / × | | UI変更の検知 |

### 選択の理由

（なぜこの組み合わせにしたかを記載）

---

## CCへの指示方法

### テストを書いてほしいとき

実装指示に以下を含める：

```
以下の関数・処理にはテストも書いてください：
- calculateTotal()（計算ロジック）
- validateEmail()（バリデーション）
```

### テストが不要なとき

明示的に伝える：

```
テストは不要です。目視確認で進めます。
```

### CCにお任せするとき

```
必要に応じてテストも書いてください。
特に計算ロジックやバリデーションは重点的にお願いします。
```

---

## テスト実行タイミング

| タイミング | 実行するテスト |
|-----------|---------------|
| 開発中 | 変更した部分の単体テスト |
| PR/マージ前 | 全テスト |
| デプロイ前 | 全テスト + E2E（採用している場合） |

---

## 備考

- 作成日: YYYY/MM/DD
- ステータス: ドラフト / 施主承認済み