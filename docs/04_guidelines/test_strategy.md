# テスト戦略

## 概要

本ドキュメントは、Cocktailpedia プロジェクトのテスト方針を定義する。

---

## テスト方針

### 基本スタンス

**選択的**: 複雑なロジック・重要な機能のみテストを書く

### 選択した理由

- 個人開発で時間が限られている
- UI中心のアプリでロジックが限定的
- 開発スピードとテストのバランスを取る

---

## テストを書く対象

### 書く

| 対象 | 理由 |
|------|------|
| 検索・フィルタリングロジック | 条件が複雑、バグが出やすい |
| バリデーション | 入力パターンが多い |
| データ変換・フォーマット | 期待する出力が明確 |

### 書かない

| 対象 | 理由 |
|------|------|
| UIコンポーネントの見た目 | 目視確認の方が早い |
| 単純なCRUD操作 | Supabase / Next.js を信頼 |
| 一度作ったら変えない部分 | 維持コストに見合わない |

### 判断に迷ったら

- CCに相談して判断する
- 「このコードが壊れたらどれくらい困る？」で考える
- 迷うくらいなら書かない（後から必要になったら追加）

---

## テストの種類

| 種類 | 採用 | ツール | 備考 |
|------|------|--------|------|
| 単体テスト | ○ | Vitest | 関数・ロジック単位 |
| 結合テスト | × | - | 不採用 |
| E2Eテスト | × | - | 不採用 |

### テストファイルの配置

同一ディレクトリ方式を採用：

```
lib/utils/formatDate.ts       # 実装
lib/utils/formatDate.test.ts  # テスト
```

### テスト実行

- 実行コマンド: `npm run test`
- 設定ファイル: `vitest.config.ts`（CCが初期セットアップ時に作成）

### 選択の理由

- 単体テストのみで十分カバー可能な規模
- E2Eは導入・維持コストが高い

---

## CCへの指示方法

### 基本方針

**CCにお任せ**: 必要に応じてテストも書いてもらう

### 指示テンプレート

```
必要に応じてテストも書いてください。
特に計算ロジックやバリデーションは重点的にお願いします。
```

---

## テスト実行タイミング

| タイミング | 実行するテスト |
|-----------|---------------|
| 開発中 | 変更した部分の単体テスト |
| PR/マージ前 | 全テスト |

---

## 備考

- 作成日: 2026/01/21
- ステータス: 施主承認済み
