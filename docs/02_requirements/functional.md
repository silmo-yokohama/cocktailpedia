# 機能要件

## 概要

本ドキュメントは、Cocktailpedia で実現する機能を定義する。

---

## 機能一覧

| ID | 機能名 | 概要 | 優先度 |
|----|--------|------|--------|
| F-001 | カクテル一覧表示 | カクテルをカード形式で一覧表示する | Must |
| F-002 | カクテル詳細表示 | カクテルの詳細情報を表示する | Must |
| F-003 | カクテル検索・絞り込み | 複数条件でカクテルをAND検索する | Must |
| F-004 | ベース別フィルター | ベース（基酒）別のショートカットページ | Must |
| F-005 | お気に入り登録/解除 | カクテルをお気に入りに追加/削除する | Must |
| F-006 | お気に入り一覧表示 | お気に入りしたカクテルを一覧表示する（検索/ソート可） | Must |
| F-007 | ソート機能 | カクテル一覧を条件で並び替える | Should |
| F-008 | カクテル管理（CRUD） | 管理者がカクテルを登録/編集/削除する（画像アップロード含む） | Should |
| F-009 | 材料マスタ管理 | 管理者が材料を登録/編集/削除する | Should |
| F-010 | サイト設定管理 | 管理者がサイト説明等を編集する | Could |
| F-011 | AIレコメンド | AIがカクテルを提案する | Won't |
| F-012 | 関連カクテル表示 | 詳細ページに関連カクテルを自動表示する | Should |
| F-013 | 最近見たカクテル | トップページに閲覧履歴を表示する | Should |
| F-014 | 管理ダッシュボード | 管理画面に統計情報を表示する | Could |

### 優先度の定義

- **Must**: 必須（これがないとサービスとして成立しない）
- **Should**: 推奨（あった方がいいが、なくても最低限動く）
- **Could**: 任意（余裕があれば）
- **Won't**: 今回はやらない（将来検討）

---

## 機能詳細

### F-001: カクテル一覧表示

| 項目 | 内容 |
|------|------|
| 概要 | 登録されているカクテルをカード形式で一覧表示する |
| アクター | 一般ユーザー |
| 入力 | なし（デフォルトで全カクテル表示） |
| 処理 | カクテルデータを取得し、カード形式で表示 |
| 出力 | カクテルカード一覧（画像、名前、ベース等） |
| 例外 | カクテルが0件の場合、「カクテルがありません」を表示 |
| 備考 | - |

#### 表示方式

| 項目 | 内容 |
|------|------|
| 方式 | **無限スクロール** |
| 1回の読み込み件数 | 60件 |

#### ソート順

| ソート | 説明 | デフォルト |
|--------|------|------------|
| 登録順 | 登録日時が新しい順 | ○ |
| 名前順 | 五十音順 | |
| ブックマーク数順 | ブックマーク数が多い順 | |
| 閲覧回数順 | 閲覧回数が多い順 | |

---

### F-002: カクテル詳細表示

| 項目 | 内容 |
|------|------|
| 概要 | 選択したカクテルの詳細情報を表示する |
| アクター | 一般ユーザー |
| 入力 | カクテルID（URLパラメータ） |
| 処理 | カクテル詳細データを取得し、閲覧回数をカウントアップ（※1） |
| 出力 | カクテル詳細情報（下記参照） |
| 例外 | 存在しないIDの場合、404エラー画面を表示 |
| 備考 | - |

#### 表示情報

| 項目 | 説明 |
|------|------|
| 画像 | AI生成画像 |
| カクテル名 | 日本語名、別名、英語名 |
| ベース（基酒） | ジン、ウォッカ、ラム、テキーラ、ウイスキー、ブランデー等 |
| 材料と分量 | レシピ |
| 技法 | シェイク / ステア / ビルド / ブレンド |
| グラスの種類 | カクテルグラス、ロックグラス、ロンググラス等 |
| 度数（推定） | アルコール度数 |
| 冷たさ | アイス、ホット、クラッシュアイス、フローズン |
| 炭酸 | 強、弱、無 |
| カラー | 赤、青、黄、緑、透明、琥珀等（※2） |
| 由来・歴史 | 誕生した年代、場所、考案者、エピソード |
| カクテル言葉 | 花言葉のような意味 |
| バリエーション | 派生カクテル（例：マティーニに対するギブソン）（※3） |

※1: 同一ユーザーのリロードによる水増しは許容する（個人開発のため対策コスト>リスク）
※2: 選択肢の全量はPh5設計で定義
※3: 管理画面で手動設定

---

### F-003: カクテル検索・絞り込み

| 項目 | 内容 |
|------|------|
| 概要 | 複数条件でカクテルをAND検索する |
| アクター | 一般ユーザー |
| 入力 | 検索条件（下記参照） |
| 処理 | 条件に合致するカクテルを絞り込み |
| 出力 | 絞り込まれたカクテル一覧 |
| 例外 | 該当なしの場合、「条件に合うカクテルがありません」を表示 |
| 備考 | フィルターアイコンをクリック→モーダルで条件選択 |

#### 検索条件

| 条件 | 種別 | 説明 |
|------|------|------|
| フリーワード | テキスト入力 | 名前、別名、英語名に部分一致 |
| ベース | 単一選択 | ジン、ウォッカ、ラム、テキーラ、ウイスキー、ブランデー、ノンアルコール等（※2） |
| 材料 | 複数選択 | 検索表示対象の材料から選択（AND条件） |
| 技法 | 単一選択 | シェイク、ステア、ビルド、ブレンド |
| 度数 | 単一選択 | 無（0%）、弱（1-10%）、中（11-20%）、高（21%以上） |
| グラスの種類 | 単一選択 | カクテルグラス、ロックグラス、ロンググラス等（※2） |
| 冷たさ | 単一選択 | アイス、ホット、クラッシュアイス、フローズン |
| 炭酸 | 単一選択 | 強、弱、無 |
| カラー | 単一選択 | 赤、青、黄、緑、透明、琥珀等（※2） |

---

### F-004: ベース別フィルター

| 項目 | 内容 |
|------|------|
| 概要 | メニューからベース（基酒）を選択し、そのベースのカクテル一覧を表示 |
| アクター | 一般ユーザー |
| 入力 | ベース種別（URLパラメータ） |
| 処理 | 指定されたベースでフィルタリング |
| 出力 | フィルタリングされたカクテル一覧 |
| 例外 | 無効なベースの場合、404エラー画面を表示 |
| 備考 | URL例：`/filter/rum`, `/filter/gin` 等。この画面では検索条件の「ベース」は選択済み状態（変更不可または非表示） |

---

### F-005: お気に入り登録/解除

| 項目 | 内容 |
|------|------|
| 概要 | カクテルをお気に入りに追加/削除する |
| アクター | 一般ユーザー |
| 入力 | カクテルID、お気に入りボタンのクリック |
| 処理 | ①localStorageにお気に入り情報を保存/削除、②サーバー側でブックマーク数を+1/-1（※1） |
| 出力 | お気に入り状態の更新（ボタンのアイコン変化） |
| 例外 | サーバー通信エラー時もローカル保存は成功させる |
| 備考 | ユーザー登録不要。お気に入りリストはデバイスローカルに保存、ブックマーク数は匿名でサーバー側カウント |

※1: 同一ユーザーによる登録→解除→登録の繰り返しによる水増しは許容する（個人開発のため対策コスト>リスク）

---

### F-006: お気に入り一覧表示

| 項目 | 内容 |
|------|------|
| 概要 | お気に入りに登録したカクテルを一覧表示する |
| アクター | 一般ユーザー |
| 入力 | なし |
| 処理 | localStorageからお気に入りIDを取得し、該当カクテルを表示 |
| 出力 | お気に入りカクテル一覧 |
| 例外 | お気に入りが0件の場合、「お気に入りがありません」を表示 |
| 備考 | 検索・ソート機能あり（F-003, F-007と同等の条件で絞り込み/並び替え可能） |

---

### F-007: ソート機能

| 項目 | 内容 |
|------|------|
| 概要 | カクテル一覧を指定した条件で並び替える |
| アクター | 一般ユーザー |
| 入力 | ソート条件の選択 |
| 処理 | 選択した条件でソート |
| 出力 | ソートされたカクテル一覧 |
| 例外 | - |
| 備考 | 閲覧回数は詳細ページ閲覧時にカウント、ブックマーク数はお気に入り登録/解除時にカウント |

#### ソート条件

F-001「ソート順」を参照

---

### F-008: カクテル管理（CRUD）

| 項目 | 内容 |
|------|------|
| 概要 | 管理者がカクテルを登録/編集/削除する |
| アクター | 管理者 |
| 入力 | カクテル情報（F-002の表示情報と同等）、画像ファイル |
| 処理 | カクテルデータの作成/更新/削除、画像のアップロード/保存 |
| 出力 | 処理結果メッセージ |
| 例外 | 必須項目未入力でエラー、削除確認ダイアログ表示、画像サイズ超過時エラー |
| 備考 | 簡易認証が必要。公開画面からの導線は不要。画像アップロード機能を含む |

---

### F-009: 材料マスタ管理

| 項目 | 内容 |
|------|------|
| 概要 | 管理者が材料マスタを登録/編集/削除する |
| アクター | 管理者 |
| 入力 | 材料情報（下記参照） |
| 処理 | 材料データの作成/更新/削除 |
| 出力 | 処理結果メッセージ |
| 例外 | 使用中の材料削除時は警告表示 |
| 備考 | 簡易認証が必要 |

#### 材料マスタの項目

| 項目 | 必須 | 説明 |
|------|------|------|
| 材料名（日本語） | ○ | 表示用 |
| 材料名（英語） | - | 表示用 |
| カテゴリ | - | スピリッツ、リキュール、ジュース、ソーダ等 |
| 検索表示フラグ | ○ | 検索条件の「材料」に表示するか |

---

### F-010: サイト設定管理

| 項目 | 内容 |
|------|------|
| 概要 | 管理者がサイトの説明文等を編集する |
| アクター | 管理者 |
| 入力 | サイト説明文等 |
| 処理 | 設定データの更新 |
| 出力 | 処理結果メッセージ |
| 例外 | - |
| 備考 | 簡易認証が必要。優先度Could（余裕があれば） |

---

### F-011: AIレコメンド（Won't）

| 項目 | 内容 |
|------|------|
| 概要 | AIがユーザーの好みに合わせてカクテルを提案する |
| アクター | 一般ユーザー |
| 入力 | ユーザーの質問やプロンプト |
| 処理 | AIがカクテルを推薦 |
| 出力 | おすすめカクテル一覧 |
| 例外 | - |
| 備考 | **今回はやらない**。将来検討 |

---

### F-012: 関連カクテル表示

| 項目 | 内容 |
|------|------|
| 概要 | カクテル詳細ページに関連カクテルを表示する |
| アクター | 一般ユーザー |
| 入力 | 現在表示中のカクテルID |
| 処理 | ベースや材料の共通点から関連カクテルを自動計算 |
| 出力 | 関連カクテル一覧（3〜5件程度） |
| 例外 | 関連カクテルが見つからない場合は非表示 |
| 備考 | 自動計算方式。例：「同じベースで材料が2つ以上共通」など。具体的なロジックはPh5設計で決定 |

---

### F-013: 最近見たカクテル

| 項目 | 内容 |
|------|------|
| 概要 | トップページにユーザーが最近閲覧したカクテルの履歴を表示する |
| アクター | 一般ユーザー |
| 入力 | なし |
| 処理 | localStorageから閲覧履歴を取得しトップページに表示 |
| 出力 | 閲覧履歴セクション（最新順、最大10件程度） |
| 例外 | 履歴がない場合、セクション自体を非表示 |
| 備考 | デバイスローカルに保存。詳細ページ閲覧時に自動記録。専用ページは作らずトップページ内に表示 |

---

### F-014: 管理ダッシュボード

| 項目 | 内容 |
|------|------|
| 概要 | 管理画面のトップに統計情報を表示する |
| アクター | 管理者 |
| 入力 | なし |
| 処理 | 各種統計データを集計して表示 |
| 出力 | 統計情報（登録カクテル数、材料数、総閲覧回数など） |
| 例外 | - |
| 備考 | 簡易認証が必要。優先度Could（余裕があれば） |

---

## 備考

- 作成日: 2026/01/19
- 作成者: AG（施主ヒアリングに基づく）
- ステータス: 施主承認済み
