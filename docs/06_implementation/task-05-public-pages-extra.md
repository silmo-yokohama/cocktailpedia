# タスク5: 公開画面（追加） - 詳細実行計画

## 概要

| 項目 | 内容 |
|------|------|
| タスク名 | 公開画面（追加） |
| 目的 | 補助的な公開画面を実装する |
| 前提タスク | タスク4（公開画面・基本）✅ 完了 |
| 作業ブランチ | `feature/task-05-public-pages-extra` |
| ベースブランチ | `develop` |

> [!IMPORTANT]
> **このタスクにはUI実装が含まれます。**
> 必ず `Frontend-design` スキルを読み込み、スキルの指示に従って実装してください。

---

## 作業開始前チェック

- [ ] `develop` ブランチが最新であることを確認
- [ ] 未コミットの変更がないことを確認
- [ ] 作業用ブランチを作成: `git checkout -b feature/task-05-public-pages-extra develop`

---

## 達成すべきこと

### 1. お気に入り一覧ページ（S-004）

**URL**: `/favorites`

#### 1.1 機能仕様（F-006）

| 項目 | 仕様 |
|------|------|
| データ取得 | localStorage からお気に入りIDリストを取得 |
| 表示形式 | CocktailCard を使ったカード一覧 |
| 空状態 | 「お気に入りがありません」を表示 |

#### 1.2 検索・ソート機能

お気に入り一覧でも検索・ソートが可能。

| 機能 | 仕様 |
|------|------|
| 検索 | 検索モーダルを使用（タスク4で実装済み） |
| ソート | SortSelect を使用（名前順/ブックマーク数順/閲覧回数順） |

**実装ポイント**:
- Client Component で localStorage を読み取り
- IDリストから Supabase で詳細データを取得
- 取得後にクライアントサイドで検索・ソート

---

### 2. サイト説明ページ（S-005）

**URL**: `/about`

#### 2.1 機能仕様（F-010）

| 項目 | 仕様 |
|------|------|
| データ取得 | `site_settings` テーブルから `key = 'about_content'` を取得 |
| 表示形式 | Markdown をHTMLに変換して表示 |

#### 2.2 Markdown表示

| ライブラリ | 候補 |
|-----------|------|
| react-markdown | 推奨（軽量、シンプル） |
| @next/mdx | 代替案 |

**実装ポイント**:
- Server Component でデータ取得
- Markdown → HTML 変換
- ダークテーマに合わせたスタイリング

---

### 3. 404エラーページ（S-006）

**ファイル**: `src/app/not-found.tsx`

#### 3.1 表示内容

| 要素 | 説明 |
|------|------|
| エラーメッセージ | 「ページが見つかりません」等 |
| イラスト/アイコン | CCの裁量（lucide-react の AlertCircle 等） |
| トップへ戻るリンク | `/` へのリンクボタン |

**実装ポイント**:
- デザイン方針（クラシック・レトロ）に合わせたデザイン
- シンプルで分かりやすく

---

### 4. 検索モーダルの調整

タスク4で検索モーダルは実装済みだが、以下の調整が必要な場合は対応。

#### 4.1 確認事項

- [ ] ベース別一覧（`/filter/[base]`）から開いた場合、ベースが選択済み状態になっているか
- [ ] 検索実行後、トップページに正しく遷移するか
- [ ] 条件クリアが動作するか

---

## Git運用

- 開発は `develop` ブランチをベースとする
- 作業ブランチ: `feature/task-05-public-pages-extra`
- 全ての実装が完了し、施主が確認したらPRを作成
- PRは `develop` へマージ

---

## 参照ドキュメント

| ドキュメント | 参照内容 |
|-------------|---------|
| [機能要件書](docs/02_requirements/functional.md) | F-005, F-006, F-010 |
| [画面要件書](docs/02_requirements/screens.md) | S-004〜S-006 |
| [コンポーネント設計](docs/04_guidelines/component_architecture.md) | ディレクトリ構成 |

---

## 作業完了後チェック

### お気に入り一覧
- [ ] お気に入りしたカクテルが一覧表示される
- [ ] 0件の場合、空状態が表示される
- [ ] 検索・ソートが動作する
- [ ] お気に入り解除が動作する

### サイト説明ページ
- [ ] `/about` でサイト説明が表示される
- [ ] Markdownが正しくレンダリングされる

### 404エラーページ
- [ ] 存在しないURLでエラーページが表示される
- [ ] トップへ戻るリンクが動作する

### その他
- [ ] レスポンシブ対応（モバイル/PC）
- [ ] ESLint / Prettier エラーがない
- [ ] `npm run build` が成功する
- [ ] 全ての変更をコミット

---

## 完了報告

作業完了後、以下を施主に報告：

1. 実装した画面・機能の一覧
2. 動作確認方法
3. 判断に迷った点があれば報告

施主が確認後、`develop` へのPRを作成。

---

## 判断に迷ったら

- **Markdownライブラリの選定**: react-markdown 推奨だが、別のライブラリでもOK
- **404ページのデザイン**: デザイン方針に沿っていればCCの裁量
- **その他**: 選択肢を提示して施主に確認

---

## 備考

- 作成日: 2026/01/23
- 作成者: AG
- ステータス: CC作業依頼用
